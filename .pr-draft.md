# Draft PR: Upload Review Photos

## Story: Upload Review Photos

**Epic**: [Review System](../product/epics/review-system.md)
**Role**: Customer
**Priority**: High
**Effort**: M (3-5 days)

### Story Statement

**As a** Customer
**I want** to upload photos with my review
**So that** other customers can see the actual results of the artist's work

### Acceptance Criteria

#### Functional Requirements
- [ ] "Add Photos" button visible in review form
- [ ] Photo picker opens with multi-select capability
- [ ] Selected photos display as thumbnails in review form
- [ ] Thumbnail tap opens full-size preview
- [ ] Remove button on each thumbnail works correctly
- [ ] Maximum 5 photos enforced with error message
- [ ] Client-side image compression implemented (react-native-image-resizer)
- [ ] API endpoint returns presigned URLs for S3 upload
- [ ] Photos upload directly to S3 using presigned URLs
- [ ] Upload progress indicator displays during upload
- [ ] Failed uploads show retry option
- [ ] File size validation (5MB max) on client and server
- [ ] File type validation (JPEG, PNG, WebP) on client and server
- [ ] S3 folder structure follows `review-photos/{booking_id}/` pattern
- [ ] Photos publicly accessible via CloudFront after upload
- [ ] Review submission waits for all photos to upload before completing
- [ ] Uploaded photos display in gallery format on submitted review

### Agent Execution Checklist

- [ ] Database schema for review_images table
- [ ] API endpoint: POST /api/v1/reviews/:id/photos/presign
- [ ] Mobile: Photo picker integration with multi-select
- [ ] Mobile: Image compression (react-native-image-resizer)
- [ ] Mobile: S3 upload using presigned URLs
- [ ] Mobile: Upload progress UI
- [ ] Mobile: Gallery display for uploaded photos
- [ ] Validation: 5MB max per photo, JPEG/PNG/WebP only
- [ ] Tests: Unit tests for presigned URL generation
- [ ] Tests: Integration tests for photo upload flow
- [ ] All checks passing (build, lint, typecheck, test)

### Verification

Implementation will follow patterns from `docs/setup/S3_UPLOAD_SETUP.md` for presigned URL usage and direct browser/mobile uploads to S3.

---

**Note**: Use `gh pr create --draft` to create this PR when gh CLI is authenticated.

ðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)
